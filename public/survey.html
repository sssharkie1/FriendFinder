<!DOCTYPE html>
<html lang="en">
<html>
	<meta charset="UTF-8">
<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<!-- Optional theme -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

	<link href="https://fonts.googleapis.com/css?family=Luckiest+Guy" rel="stylesheet">

	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>




<style media="screen" type="text/css">

			.btn-group {
				min-height: 75px;
			}
			.questions {
				margin-left: 40px;
			}

			.user-info{
		    margin-left: 40px;
		    max-height: 20px;
		    padding-bottom: 10px;
		    padding-top: 20px;
			};

			#questions {
				padding-top: 10px;
				margin-top: 10px; 
			}

			#links{
   				 margin-left: 20px;
			}


			body {
	 			background-image: url('friendsBackground.jpg');
	 			font-family: 'Luckiest Guy', cursive;
			}

</style>

<head>

	<title>Friend Finder - Survey Page</title>

</head>

<body>

		<div class="image">

			<div class = "jumbotron">


				<div class = "text-center" id = 'instructions'>
				  	<h1>Welcome to Friend Finder!</h1>
					<h2>Please complete the following information.</h2>
				</div>



					<div class="container">
						<h2>Survey Questions</h2>
							<hr>

							<h3><strong>About You</strong></h3>
							<h4>Name (Required)</h4>
							<input type="text" name="" id="name" class="form-control" required >

							<h4>Link to Photo Image (Required)</h4>
							<input type="text" name="" id="photo" class="form-control" required >

							<h3><strong>Question 1</strong></h3>
							<h4>I really like kids.</h4>

						 	<select data-placeholder="" class="chosen-select" id="q1">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 2</strong></h3>
							<h4>I can can sing and/or dance.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q2">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 3</strong></h3>
							<h4>I feel I possess some magical abilities.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q3">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 4</strong></h3>
							<h4>I am a very social person.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q4">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 5</strong></h3>
							<h4>I am a generally happy go lucky person.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q5">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 6</strong></h3>
							<h4>I like to dress up and look nice.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q6">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 7</strong></h3>
							<h4>I am a kid at heart, or at least have a whimsical side.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q7">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	 <h3><strong>Question 8</strong></h3>
							<h4>I like to take risks.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q8">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 9</strong></h3>
							<h4>I would rather watch TV than read a book.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q9">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

					      	<h3><strong>Question 10</strong></h3>
							<h4>I love to cook.</h4>
							
						 	<select data-placeholder="" class="chosen-select" id="q10">
						 		<option value=""></option>
					            <option value="1">1 (Strongly Disagree)</option>
					            <option value="2">2</option>
					            <option value="3">3</option>
					            <option value="4">4</option>
					            <option value="5">5 (Strongly Agree)</option>
					      	</select>

							<br>
							<br>

						<!-- Submit Button -->
						<button type="submit" class="btn btn-primary btn-lg btn-block" id="submit">Submit</button>

					</div>

			</div>



		<footer class="footer">

		  <div class="container">

		      <p><a href = "api/friends" target="_blank">API Friends List</a> | <a href = "https://github.com/sssharkie1/FriendFinder" target="_blank" >GitHub Repo</a> | <a href="home.html">Home Page</a></p>
		      
		  </div>

		</footer>

		</div>

 
<!-- Modal -->
	<div id="resultsModal" class="modal fade" role="dialog">
	  <div class="modal-dialog">

	    <!-- Modal content-->
	    <div class="modal-content">
	      <div class="modal-header">
	        <button type="button" class="close" data-dismiss="modal">&times;</button>
	        <h2 class="modal-title"><strong>Your Match!</strong></h2>
	      </div>
	      <div class="modal-body">
	        <h2 id="matchName"></h2>
	        <img id="matchImg" src="http://static.comicvine.com/uploads/original/11/113509/3922448-4094809249-Guard.jpg" alt="Profile Photo" width="400px">
	      </div>
	      <div class="modal-footer">
	        <button type="button" class="close btn btn-default" data-dismiss="modal">Close</button>
	      </div>
	    </div>

	  </div>
	</div>
</body>	
<script>
	  
	  //Get and store survey results 
	    $("#submit").on("click", function(){

	      // Validate survey information is complete
	      function validateForm() {
	      var isComplete = true;
	      $('.form-control').each(function() {
	        if ( $(this).val() === '' )
	            isComplete = false;
	      });

	      $('.chosen-select').each(function() {

	        if( $(this).val() === "")
	          isComplete = false
	      })
	      return isComplete;
	    }

	    // If all required fields are completed
	    if (validateForm() == true) {
	      // Create an object for friends array
	        var friends = {
	          name: $("#name").val().trim(),
	          photo: $("#photo").val().trim(),
	          scores: [$("#q1").val(), $("#q2").val(), $("#q3").val(), $("#q4").val(), $("#q5").val(), $("#q6").val(), $("#q7").val(), $("#q8").val(), $("#q9").val(), $("#q10").val()]
	        }

	        console.log(friends);

	        // Get the URL of the website
	        var currentURL = window.location.origin;
	 
	        // AJAX post the data to the friendsArray. 
	        $.post(currentURL + "/api/friends", friends, function(data){

	          // Grab the result from the AJAX post so that the best match's name and photo are displayed.
	          $("#matchName").text(data.name);
	          $("#matchImg").attr("src", data.photo);

	          // Show the modal with the best match 
	          $("#resultsModal").modal('toggle');

	        });
	    } else
	    {
	      alert("Please complete all survey questions before submitting!");
	    }
	      
	      return false;
	    });

	    //On modal close, clear data for new user
	     $(".close").on("click", function(){
	        $('#name').val(" ");
	        $('#photo').val(" ");

	        //Reset the chosen options back to empty
	        $(".chosen-select").val('').trigger("chosen:updated");
	     });

</script>


</html>